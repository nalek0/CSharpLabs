# Практика 5

## DI-контейнеры (5+2 баллов)

Выберите какие-либо два контейнера зависимостей (DI-контейнер) и представьте их интеграцию
(в двух независимых версиях) в Ваш проект. Настройка одного из контейнеров должна
осуществляться через файл конфигурации.

Требования по каждому из DI-контейнеров:
1. Должен быть использован один из DI-контейнеров: Autofac, SimpleInjector, Microsoft.Extensions.DependencyInjection.
1. Используйте все три вида жизненных циклов зависимостей: Singleton, Transient, Scoped
1. Должен быть явно обозначен корень композиции.
1. В Вашем проекте должны быть представлены все три вида внедрения зависимостей: через конструктор, через метод и через свойство.
1. Работоспособность использованного контейнера в Вашем проекте должна быть продемонстрирована с помощью юнит-тестов и fake-objects (mocks, stubs).

## Ado.Net лабораторная (5 баллов)

Необходимо реализовать бизнес-логику для работы с данными по футбольным сборным, которые хранятся в базе данных (например, в MS SQL Server), с применением технологии Ado.Net.

### Сущности в БД

Все сущности (таблицы и их отношения) вы создаете в базе данных самостоятельно. Сущности
создаются исходя из доменной модели вашего приложения.
Должны быть связи между сущностями нескольких видов: 1:1, 1:N, N:N.

#### Например:

> Игрок (PlayerID, FirstName, SecondName, AddressID, TeamID, NumberOfGoals)
> Адрес игрока (AddressID, Country, City, Street, Building, Apartment)
> Футбольная команда (TeamID, TeamName, EstYear)
> Стадион (StadiumID, StadiumName)
> Футбольная команда_ Стадион (TeamID, StadiumID)
> Stats(TeamID, NumberOfPlayers, NumberOfStadiums, AverageGoalsPerPlayer)

### Комментарии

> Игрок - Адрес игрока. Связь 1:1. предположим, что все игроки живут по разным адресам
> Футбольная команда - Игрок. Связь 1:N. в одной команде играет сразу несколько игроков
> Футбольная команда - Стадион. Связь N:N. на одном стадионе тренируются сразу несколько команд, при этом одна команда может тренироваться на нескольких стадионах
> Stats содержит статистику по футбольной команде:
> NumberOfPlayers - количество игроков в команде
> NumberOfStadiums - количество стадионов, на которых тренируется команда
> AverageGoals - среднее количество голов, которое забивает команда по всем матчам

### Основные требования

Решение должно включать в себя (все операции производятся из вашей программы):
1. Подключение к базе данных, выполнение SQL запросов, реализацию и запуск 1-2 хранимых процедур.
1. Должны быть реализованы функции CRUD (create, read, update, delete) для некоторых сущностей.
1. Транзакции. Например, таблица со статистикой Stats, в которой содержатся агрегированные данные, должна обновляться вместе с изменением других сущностей в одной транзакции. Например, при удалении игрока из команды в таблице Stats обновляется (уменьшается) поле NumberOfPlayers. 
